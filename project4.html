<!doctype html>
<meta charset="utf-8">

<script src="http://d3plus.org/js/d3.js"></script>
<script src="http://d3plus.org/js/d3plus.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.3/require.min.js"></script>-->
<!--<script type="text/javascript" src="./edges.json"></script>-->
<script type="text/javascript" src="./project_posits.json"></script>
<script type="text/javascript" src="./project_data.json"></script>

<!-- create container element for visualization -->
<div id="viz"></div>

<script>

  // create list of node connections
    var connections = []

    var changes =[{
      "Updated": "Wed Apr 26 11:46:33 2017",
      "ID": "11",
      "Bikes Available": 8,
      "name": "Longwood Ave at Binney St",
      "Total Activity": 0,
      "color": "green"
    },
    {
      "Updated": "Wed Apr 26 12:46:19 2017",
      "ID": "12",
      "Bikes Available": 5,
      "name": "Ruggles T Stop - Columbus",
      "Total Activity": 0,
      "color": "yellow"
    },
    {
      "Updated": "Wed Apr 26 12:32:10 2017",
      "ID": "13",
      "Bikes Available": 9,
      "name": "Boston Medical Center - E",
      "Total Activity": 0,
      "color": "green"
    },
    {
      "Updated": "Wed Apr 26 13:00:08 2017",
      "ID": "14",
      "Bikes Available": 9,
      "name": "HMS/HSPH - Avenue Louis Pasteur",
      "Total Activity": 0,
      "color": "green"
    },
    {
      "Updated": "Wed Apr 26 09:08:31 2017",
      "ID": "15",
      "Bikes Available": 2,
      "name": "Brighton Mills - 370 Western",
      "Total Activity": 0,
      "color": "red"
    }]

  // instantiate d3plus
  var visualization = d3plus.viz()
    .container("#viz")  // container DIV to hold the visualization
    .type("network")    // visualization type
    .data(data)  // sample dataset to attach to nodes
    .nodes(positions)   // x and y position of nodes
    .id("name")         // key for which our data is unique on
    .edges(connections) // empty list but needed for this vis type
    //.text(positions["name"])//not needed for now
    //.size(function(){data["value"]*3})
    .size(5)    // key to size the nodes
    .color({"value": "color"})
    //.color({
     //"heatmap": ["#ff0000", "#ffff00", "#00ff00"],
     //"value": "Bikes Available" })
    //.focus(connections[0]["source"])
    .title("Test Nodes for Project - #3")
    .title({
      "sub": "More testing",
    })
    .footer({
      "link": "https://www.thehubway.com/system-data",
      "value": "Data Source"})
    .tooltip(["Bikes Available", "Total Activity" , "Updated"])
    //.zoom(false)
    .history(true)
    .legend(false)
    .draw()             // finally, draw the visualization!




  setTimeout(function(){

     data.push({
       "Updated": "Wed Apr 26 11:46:33 2017",
       "ID": "11",
       "Bikes Available": 8,
       "name": "Longwood Ave at Binney St",
       "Total Activity": 0,
       "color": "green"
     },
     {
       "Updated": "Wed Apr 26 12:46:19 2017",
       "ID": "12",
       "Bikes Available": 5,
       "name": "Ruggles T Stop - Columbus",
       "Total Activity": 0,
       "color": "yellow"
     })
     visualization
      //.nodes(positions)
      //.edges(connections)
      .draw()
  },6000)



//  i = 0


</script>
