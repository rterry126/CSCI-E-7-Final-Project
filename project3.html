<!doctype html>
<meta charset="utf-8">

<script src="http://d3plus.org/js/d3.js"></script>
<script src="http://d3plus.org/js/d3plus.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.3/require.min.js"></script>-->
<!--<script type="text/javascript" src="./edges.json"></script>-->
<script type="text/javascript" src="./project_posits.json"></script>
<script type="text/javascript" src="./project_data.json"></script>
<script>
    function reload_js(src) {
        $('script[src="' + src + '"]').remove();
        $('<script>').attr('src', src).appendTo('head');
    }
    reload_js('./project_data.json');
</script>

<!-- create container element for visualization -->
<div id="viz"></div>

<script>

  // create list of node connections
    var connections = []

  // instantiate d3plus
  var visualization = d3plus.viz()
    .container("#viz")  // container DIV to hold the visualization
    .type("network")    // visualization type
    .data(data)  // sample dataset to attach to nodes
    .nodes(positions)   // x and y position of nodes
    .id("name")         // key for which our data is unique on
    .edges(connections) // empty list but needed for this vis type
    //.text(positions["name"])//not needed for now
    //.size(function(){data["value"]*3})
    .size(5)    // key to size the nodes
    .color({"value": "color"})
    //.color({
     //"heatmap": ["#ff0000", "#ffff00", "#00ff00"],
     //"value": "Bikes Available" })
    //.focus(connections[0]["source"])
    .title("Test Nodes for Project - #3")
    .title({
      "sub": "More testing",
    })
    .footer({
      "link": "https://www.thehubway.com/system-data",
      "value": "Data Source"})
    .tooltip(["Bikes Available", "Total Activity" , "Updated"])
    //.zoom(false)
    .history(true)
    .legend(false)
    .draw()             // finally, draw the visualization!




  //setTimeout(function(){
     //data.push(changes)
     //visualization
     //.size(4)    // key to size the nodes
    //  .focus(changes[0]['name'])
    //  .data(data)
      // .nodes(positions)
      // .edges(connections)
      // .zoom(false)
    //  .draw()
//  },6000)
//  i = 0
  function timeout() {
  setTimeout(function () {
     //data.push()
     reload_js('./project_data.json');

     visualization
      //.size(4)    // key to size the nodes
      .data(data)
    //    .nodes(positions)
      //  .edges(connections)
        //.zoom(false)

       .draw()

      //  i++;
      timeout();
   }, 11000);
}
   //setTimeout(function(){
     //data.push(changes)
    // visualization
     //.size(4)    // key to size the nodes
      //.focus(false)
      // .nodes(positions)
      // .edges(connections)
       //.draw()
  // },6000)
timeout();
</script>
